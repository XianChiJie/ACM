实验7-3-6-字符串 字符串转换成十进制整数 (15分)

输入一个以#结束的字符串，本题要求滤去所有的非十六进制字符（不分大小写），组成一个新的表示十六进制数字的字符串，然后将其转换为十进制数后输出。如果在第一个十六进制字符之前存在字符“-”，则代表该数是负数。

### 输入格式：

输入在一行中给出一个以#结束的非空字符串。

### 输出格式：

在一行中输出转换后的十进制数。题目保证输出在长整型范围内。

### 输入样例：

```in
+-P-xf4+-1!#
```

### 输出样例：

```out
-3905
```



```c++
#include<iostream>
#include<cmath>
int main()
{
	char a[1000] = { 0 }, ch=' ', b[1000] = { 0 };
	int i = 0, k, d, flag=1;
	double sum = 0;
	while (scanf("%c",&ch)&&ch != '#') a[i++] = ch;
	for (k = 0; k < i; k++) if (a[k] >= '0' && a[k] <= '9' || a[k] >= 'a' && a[k] <= 'f' || a[k] >= 'A' && a[k] <= 'F') break;
	for (d = 0; d < k; d++) if (a[d] == '-') {
		flag = -1;
		break;
	}
	for (d = 0, k = 0; k < i; k++) if (a[k] >= '0' && a[k] <= '9' || a[k] >= 'a' && a[k] <= 'f' || a[k] >= 'A' && a[k] <= 'F') b[d++] = a[k];
	for (k = 0; d > 0;k++,d--) {
		if (b[k] >= '0' && b[k] <= '9') sum += (b[k]*1.0 - 48) * pow(16, d*1.0 - 1);
		if (b[k] >= 'a' && b[k] <= 'f') sum += (b[k] * 1.0 - 87) * pow(16, d*1.0 - 1);
		if (b[k] >= 'A' && b[k] <= 'F') sum += (b[k] * 1.0 - 55) * pow(16, d*1.0 - 1);
	}
	printf("%.0f\n", sum==0?0:sum*flag);
	return 0;
}
```

